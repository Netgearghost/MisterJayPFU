on_actions = {
	on_startup = {
		effect = {
			every_country = {
				limit = {
					country_has_resistance = yes
				}
				set_variable = { resistance_variable = 0 }
				set_variable = { resistance_state = 1 }
				set_variable = { resistance_max = 38 }
			}
		}
	}

    on_daily = {
		effect = {
            if = {
				limit = { country_has_resistance = yes }

				########################################################
				# CHECKING CHINESE STATES
				########################################################
					if = {
						limit = {
							608 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_608_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_608_taken
					}

					if = {
						limit = {
							597 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_597_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_597_taken
					}

					if = {
						limit = {
							598 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_598_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_598_taken
					}

					if = {
						limit = {
							613 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_613_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_613_taken
					}

					if = {
						limit = {
							596 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_596_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_596_taken
					}

					if = {
						limit = {
							595 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_595_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_595_taken
					}

					if = {
						limit = {
							760 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_760_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_760_taken
					}

					if = {
						limit = {
							758 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_758_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_758_taken
					}

					if = {
						limit = {
							759 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_759_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_759_taken
					}

					if = {
						limit = {
							593 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_593_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_593_taken
					}

					if = {
						limit = {
							592 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_592_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_592_taken
					}

					if = {
						limit = {
							594 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_594_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_594_taken
					}

					if = {
						limit = {
							591 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_591_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_591_taken
					}

					if = {
						limit = {
							599 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_599_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_599_taken
					}

					if = {
						limit = {
							325 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_325_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_325_taken
					}

					if = {
						limit = {
							603 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_603_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_603_taken
					}

					if = {
						limit = {
							765 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_765_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_765_taken
					}

					if = {
						limit = {
							602 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_602_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_602_taken
					}

					if = {
						limit = {
							764 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_764_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_764_taken
					}

					if = {
						limit = {
							600 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_600_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_600_taken
					}

					if = {
						limit = {
							606 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_606_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_606_taken
					}

					if = {
						limit = {
							614 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_614_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_614_taken
					}

					if = {
						limit = {
							607 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_607_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_607_taken
					}

					if = {
						limit = {
							620 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_620_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_620_taken
					}

					if = {
						limit = {
							763 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_763_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_763_taken
					}

					if = {
						limit = {
							761 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_761_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_761_taken
					}

					if = {
						limit = {
							605 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_605_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_605_taken
					}

					if = {
						limit = {
							601 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_601_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_601_taken
					}

					if = {
						limit = {
							283 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_283_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_283_taken
					}

					if = {
						limit = {
							604 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_604_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_604_taken
					}

					if = {
						limit = {
							287 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_287_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_287_taken
					}

					if = {
						limit = {
							617 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_617_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_617_taken
					}

					if = {
						limit = {
							618 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_618_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_618_taken
					}

					if = {
						limit = {
							619 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_619_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_619_taken
					}

					if = {
						limit = {
							622 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_622_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_622_taken
					}

					if = {
						limit = {
							615 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_615_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_615_taken
					}

					if = {
						limit = {
							621 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_621_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_621_taken
					}

					if = {
						limit = {
							762 = { is_controlled_by = JAP }
							NOT = { has_country_flag = state_762_taken }
						}
						add_to_variable = { resistance_variable = 1 }
						set_country_flag = state_762_taken
					}
				########################################################

				########################################################
				# CLEARING
				########################################################

					if = {
						limit = {
							has_country_flag = state_608_taken
							608 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_608_taken
					}

					if = {
						limit = {
							has_country_flag = state_597_taken
							597 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_597_taken
					}

					if = {
						limit = {
							has_country_flag = state_598_taken
							598 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_598_taken
					}

					if = {
						limit = {
							has_country_flag = state_613_taken
							613 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_613_taken
					}

					if = {
						limit = {
							has_country_flag = state_596_taken
							596 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_596_taken
					}

					if = {
						limit = {
							has_country_flag = state_595_taken
							595 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_595_taken
					}

					if = {
						limit = {
							has_country_flag = state_760_taken
							760 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_760_taken
					}

					if = {
						limit = {
							has_country_flag = state_758_taken
							758 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_758_taken
					}

					if = {
						limit = {
							has_country_flag = state_759_taken
							759 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_759_taken
					}

					if = {
						limit = {
							has_country_flag = state_593_taken
							593 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_593_taken
					}

					if = {
						limit = {
							has_country_flag = state_592_taken
							592 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_592_taken
					}

					if = {
						limit = {
							has_country_flag = state_594_taken
							594 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_594_taken
					}

					if = {
						limit = {
							has_country_flag = state_591_taken
							591 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_591_taken
					}

					if = {
						limit = {
							has_country_flag = state_599_taken
							599 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_599_taken
					}

					if = {
						limit = {
							has_country_flag = state_325_taken
							325 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_325_taken
					}

					if = {
						limit = {
							has_country_flag = state_603_taken
							603 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_603_taken
					}

					if = {
						limit = {
							has_country_flag = state_765_taken
							765 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_765_taken
					}

					if = {
						limit = {
							has_country_flag = state_602_taken
							602 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_602_taken
					}

					if = {
						limit = {
							has_country_flag = state_764_taken
							764 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_764_taken
					}

					if = {
						limit = {
							has_country_flag = state_600_taken
							600 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_600_taken
					}

					if = {
						limit = {
							has_country_flag = state_606_taken
							606 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_606_taken
					}

					if = {
						limit = {
							has_country_flag = state_614_taken
							614 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_614_taken
					}

					if = {
						limit = {
							has_country_flag = state_607_taken
							607 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_607_taken
					}

					if = {
						limit = {
							has_country_flag = state_620_taken
							620 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_620_taken
					}

					if = {
						limit = {
							has_country_flag = state_763_taken
							763 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_763_taken
					}

					if = {
						limit = {
							has_country_flag = state_761_taken
							761 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_761_taken
					}

					if = {
						limit = {
							has_country_flag = state_605_taken
							605 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_605_taken
					}

					if = {
						limit = {
							has_country_flag = state_601_taken
							601 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_601_taken
					}

					if = {
						limit = {
							has_country_flag = state_283_taken
							283 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_283_taken
					}

					if = {
						limit = {
							has_country_flag = state_604_taken
							604 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_604_taken
					}

					if = {
						limit = {
							has_country_flag = state_287_taken
							287 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_287_taken
					}

					if = {
						limit = {
							has_country_flag = state_617_taken
							617 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_617_taken
					}

					if = {
						limit = {
							has_country_flag = state_618_taken
							618 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_618_taken
					}

					if = {
						limit = {
							has_country_flag = state_619_taken
							619 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_619_taken
					}

					if = {
						limit = {
							has_country_flag = state_622_taken
							622 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_622_taken
					}

					if = {
						limit = {
							has_country_flag = state_615_taken
							615 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_615_taken
					}

					if = {
						limit = {
							has_country_flag = state_621_taken
							621 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_621_taken
					}

					if = {
						limit = {
							has_country_flag = state_762_taken
							762 = { NOT = { is_controlled_by = JAP } }
						}

						subtract_from_variable = { resistance_variable = 1 }
						clr_country_flag = state_762_taken
					}
				########################################################

				if = {
					limit = { check_variable = { resistance_variable > 9 } }
					add_ideas = JAP_resistance_0
					if = {
						limit = { has_idea = JAP_resistance_1 }
						remove_ideas = JAP_resistance_1
					}
					if = {
						limit = { has_idea = JAP_resistance_2 }
						remove_ideas = JAP_resistance_2
					}
					if = {
						limit = { has_idea = JAP_resistance_3 }
						remove_ideas = JAP_resistance_3
					}
				}

				if = {
					limit = { check_variable = { resistance_variable > 19 } }
					add_ideas = JAP_resistance_1
					if = {
						limit = { has_idea = JAP_resistance_0 }
						remove_ideas = JAP_resistance_0
					}
					if = {
						limit = { has_idea = JAP_resistance_2 }
						remove_ideas = JAP_resistance_2
					}
					if = {
						limit = { has_idea = JAP_resistance_3 }
						remove_ideas = JAP_resistance_3
					}
					if = {
						limit = {
							NOT = {
								CHI = {
									OR = {
										has_idea = CHI_resistance_1
										has_idea = CHI_resistance_2
									}
								}
							}
						}
						CHI = {
							add_ideas = CHI_resistance_1
						}
					}
				}

				if = {
					limit = { check_variable = { resistance_variable > 24 } }
					add_ideas = JAP_resistance_2
					if = {
						limit = { has_idea = JAP_resistance_0 }
						remove_ideas = JAP_resistance_0
					}
					if = {
						limit = { has_idea = JAP_resistance_1 }
						remove_ideas = JAP_resistance_1
					}
					if = {
						limit = { has_idea = JAP_resistance_3 }
						remove_ideas = JAP_resistance_3
					}
					if = {
						limit = { NOT = {  CHI = { has_idea = CHI_resistance_2 } } }
						CHI = {
							add_ideas = CHI_resistance_2
							remove_ideas = CHI_resistance_1
						}
					}
				}

				if = {
					limit = { NOT = { country_exists = CHI } }
					add_ideas = JAP_resistance_3
					if = {
						limit = { has_idea = JAP_resistance_0 }
						remove_ideas = JAP_resistance_0
					}
					if = {
						limit = { has_idea = JAP_resistance_1 }
						remove_ideas = JAP_resistance_1
					}
					if = {
						limit = { has_idea = JAP_resistance_2 }
						remove_ideas = JAP_resistance_2
					}
				}

                clamp_variable = { var = resistance_variable min = 0 max = resistance_max }
			}
		}
	}
}
